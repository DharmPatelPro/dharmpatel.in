<!doctype html>

<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- PRIMARY META TAGS -->
    <title>Dharm Patel | Robotics & Automation Engineer Ahmedabad | Control Systems, ROS2 & Embedded Expert</title>

    <meta name="description"
        content="Professional Robotics & Automation Engineer in Ahmedabad, Gujarat specializing in control systems (PID/LQR), ROS2 navigation (Nav2), embedded electronics (STM32/ESP32), autonomous systems, and industrial automation. ABU Robocon 2025 Team India with expertise in complete robotics solutions from design to deployment.">

    <meta name="keywords"
        content="Robotics Engineer Ahmedabad, Automation Engineer Gujarat, Robotics and Automation Engineer India, Control Systems Engineer Ahmedabad, ROS2 Developer India, Industrial Automation Ahmedabad, Mobile Robotics Developer, Embedded Systems Specialist Gujarat, ROS2 Navigation Expert, Autonomous Navigation Gujarat, Circuit Design Expert Ahmedabad, PID Controller Design, Nav2 Navigation Ahmedabad, LQR Control Systems, STM32 Developer India, ESP32 Programming Ahmedabad, ROS2 Humble Developer, Robot Design Engineer, Kalman Filter Implementation, ros2_control Specialist, Sensor Fusion Engineer, SLAM Expert India, Robotics Consultant Gujarat, ABU Robocon Engineer, Path Planning Algorithms, Microcontroller Programming, UART SPI I2C CAN Expert, Feed Forward Control, Trajectory Generation, State Space Modeling, Transfer Function Analysis, RTOS Development, ATmega Programming, Raspberry Pi Developer, PCB Design Ahmedabad, EasyEDA KiCad Expert, Power Supply Design, Gazebo Simulation Expert">

    <meta name="author" content="Dharm Patel">
    <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">
    <meta name="googlebot" content="index, follow">

    <!-- CANONICAL URL -->
    <link rel="canonical" href="https://dharmpatel.in/">

    <!-- OPEN GRAPH / FACEBOOK -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://dharmpatel.in/">
    <meta property="og:site_name" content="Dharm Patel - Robotics Engineer">
    <meta property="og:title"
        content="Dharm Patel | Robotics & Automation Engineer Ahmedabad | Control Systems & ROS2 Expert">
    <meta property="og:description"
        content="Professional Robotics & Automation Engineer specializing in control systems, ROS2 navigation, embedded electronics, and autonomous systems. Complete robotics solutions from design to deployment in Ahmedabad, Gujarat. ABU Robocon 2025 Team India.">
    <meta property="og:image" content="https://dharmpatel.in/photos/g5.webp">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt"
        content="Dharm Patel - Robotics and Automation Engineer working on autonomous navigation systems">
    <meta property="og:locale" content="en_IN">

    <!-- TWITTER CARD -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://dharmpatel.in/">
    <meta name="twitter:title" content="Dharm Patel | Robotics & Automation Engineer Ahmedabad">
    <meta name="twitter:description"
        content="Professional Robotics & Automation Engineer specializing in control systems, ROS2 navigation, embedded electronics, and autonomous robotics in Ahmedabad, Gujarat.">
    <meta name="twitter:image" content="https://dharmpatel.in/photos/g5.webp">
    <meta name="twitter:image:alt" content="Dharm Patel - Robotics Engineer">

    <!-- GEO TAGS FOR LOCAL SEO -->
    <meta name="geo.region" content="IN-GJ">
    <meta name="geo.placename" content="Ahmedabad">
    <meta name="geo.position" content="23.0225;72.5714">
    <meta name="ICBM" content="23.0225, 72.5714">

    <!-- STRUCTURED DATA (JSON-LD) -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Person",
      "name": "Dharm Patel",
      "url": "https://dharmpatel.in",
      "image": "https://dharmpatel.in/photos/g5.webp",
      "jobTitle": "Robotics & Automation Engineer",
      "description": "Professional Robotics & Automation Engineer specializing in control systems (PID/LQR control design), ROS2 development (Nav2, ros2_control), embedded electronics (STM32/ESP32), autonomous navigation systems, custom circuit design, SLAM, Kalman filtering, sensor fusion, and industrial automation. Complete robotics solutions from concept to deployment. Based in Ahmedabad, Gujarat, India.",
      "address": {
        "@type": "PostalAddress",
        "addressLocality": "Ahmedabad",
        "addressRegion": "Gujarat",
        "addressCountry": "IN"
      },
      "alumniOf": [
        {
          "@type": "CollegeOrUniversity",
          "name": "Vishwakarma Government Engineering College",
          "sameAs": "https://www.vgecg.ac.in"
        },
        {
          "@type": "EducationalOrganization",
          "name": "R.C Technical Institute"
        }
      ],
      "knowsAbout": [
        "Robotics Engineering",
        "Industrial Automation",
        "Automation Systems",
        "Mobile Robotics",
        "Autonomous Robotics",
        "Robot Design",
        "PID Control Systems",
        "LQR Control Design",
        "Control Systems Engineering",
        "ROS2 Development",
        "Nav2 Navigation",
        "STM32 Development",
        "ESP32 Programming",
        "Embedded Systems",
        "ros2_control",
        "Autonomous Navigation",
        "Circuit Design",
        "Microcontroller Programming",
        "Kalman Filtering",
        "Sensor Fusion",
        "SLAM",
        "Path Planning Algorithms",
        "State Space Modeling",
        "Transfer Function Analysis",
        "Feed Forward Control",
        "Close Loop Control",
        "Open Loop Control",
        "Trajectory Generation",
        "Motion Control",
        "Dead Reckoning",
        "Odometry",
        "Spline Trajectories",
        "Polynomial Curves",
        "S-Curve Motion Profiles",
        "UART SPI I2C Communication",
        "CAN Protocol",
        "RTOS Development",
        "ATmega Programming",
        "Raspberry Pi",
        "Jetson Nano",
        "Gazebo Simulation",
        "Robot Operating System",
        "Image Processing",
        "Computer Vision",
        "YOLO Object Detection",
        "PCB Design",
        "KiCad",
        "EasyEDA",
        "Power Electronics",
        "3D CAD Design",
        "OnShape"
      ],
      "hasCredential": {
        "@type": "EducationalOccupationalCredential",
        "credentialCategory": "Design Patent",
        "name": "Automated Planting & Harvesting Robot",
        "description": "Design Registration Number 439799-001 granted by Government of India"
      },
      "sameAs": [
        "https://www.linkedin.com/in/dharm-patel-aa1a87212/",
        "https://instagram.com/dharm_patel_14",
        "https://github.com/DharmPatelPro"
      ],
      "contactPoint": {
        "@type": "ContactPoint",
        "contactType": "Professional Services",
        "availableLanguage": ["English", "Hindi", "Gujarati"]
      }
    }
    </script>

    <!-- WEBSITE SCHEMA -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "Dharm Patel - Robotics Engineer",
      "url": "https://dharmpatel.in",
      "description": "Professional robotics engineering portfolio showcasing expertise in ROS2, autonomous systems, control engineering, and embedded electronics.",
      "inLanguage": "en-IN",
      "publisher": {
        "@type": "Person",
        "name": "Dharm Patel"
      }
    }
    </script>

    <!-- PROFESSIONAL SERVICE SCHEMA -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "ProfessionalService",
      "name": "Dharm Patel Robotics Engineering",
      "image": "https://dharmpatel.in/photos/g5.webp",
      "description": "Professional Robotics & Automation engineering services including complete robot design and deployment, industrial automation solutions, control systems engineering (PID/LQR), ROS2 robotics development (Nav2, ros2_control), autonomous navigation systems, embedded electronics (STM32/ESP32), custom circuit design, SLAM implementation, Kalman filtering, sensor fusion, and robotics control solutions.",
      "address": {
        "@type": "PostalAddress",
        "addressLocality": "Ahmedabad",
        "addressRegion": "Gujarat",
        "addressCountry": "IN"
      },
      "geo": {
        "@type": "GeoCoordinates",
        "latitude": "23.0225",
        "longitude": "72.5714"
      },
      "areaServed": [
        {
          "@type": "City",
          "name": "Ahmedabad"
        },
        {
          "@type": "State",
          "name": "Gujarat"
        },
        {
          "@type": "Country",
          "name": "India"
        }
      ],
      "priceRange": "$$",
      "serviceType": [
        "Robotics Engineering",
        "Automation Systems",
        "Industrial Automation",
        "Mobile Robotics",
        "Autonomous Navigation Systems",
        "Control Systems Engineering",
        "ROS2 Development",
        "ROS2 Navigation (Nav2)",
        "Embedded Systems Development",
        "Circuit Design Services",
        "PID Controller Design",
        "Microcontroller Programming",
        "SLAM Implementation",
        "Robot Design & Development",
        "PCB Design"
      ]
    }
    </script>

    <!-- DETAILED CAPABILITIES SCHEMA (Based on Capabilities Section) -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "ItemList",
      "name": "Dharm Patel Engineering Capabilities",
      "description": "Comprehensive technical capabilities in robotics, control systems, and embedded engineering",
      "itemListElement": [
        {
          "@type": "ListItem",
          "position": 1,
          "item": {
            "@type": "Skill",
            "name": "Control Systems Engineering",
            "description": "Advanced control systems design and implementation",
            "educationalLevel": "Expert",
            "keywords": [
              "PID Control",
              "LQR Control",
              "Close Loop Control",
              "Open Loop Control",
              "Feed Forward Control",
              "Kalman Filter",
              "Low Pass Filter",
              "Complementary Filter",
              "Butterworth Filter",
              "Sensor Fusion",
              "State Space Model",
              "Transfer Function",
              "Differential Equation",
              "Block Diagram",
              "Kinematic Model",
              "Dynamic Model"
            ]
          }
        },
        {
          "@type": "ListItem",
          "position": 2,
          "item": {
            "@type": "Skill",
            "name": "Embedded Systems & Electronics",
            "description": "Microcontroller programming and embedded systems development",
            "educationalLevel": "Expert",
            "keywords": [
              "STM32",
              "ESP32",
              "ATmega",
              "Raspberry Pi",
              "Jetson Nano",
              "STM32CubeIDE",
              "Arduino IDE",
              "PlatformIO",
              "RTOS",
              "C Programming",
              "C++ Programming",
              "Python",
              "UART",
              "SPI",
              "I2C",
              "CAN",
              "LAN",
              "RS232",
              "RS485",
              "EasyEDA",
              "KiCad",
              "PCB Design",
              "Circuit Design",
              "Soldering",
              "Hardware Debugging",
              "Power Supply Design"
            ]
          }
        },
        {
          "@type": "ListItem",
          "position": 3,
          "item": {
            "@type": "Skill",
            "name": "ROS2 & Robotics Stack",
            "description": "Robot Operating System 2 development and autonomous navigation",
            "educationalLevel": "Expert",
            "keywords": [
              "ROS2",
              "Robot Operating System 2",
              "Nav2 Navigation",
              "ros2_control",
              "Image Processing",
              "YOLO",
              "Dead Reckoning",
              "Odometry",
              "SLAM",
              "Path Planning",
              "Trajectory Generation",
              "Motion Control",
              "Spline Trajectories",
              "Polynomial Curves",
              "S-Curve Motion",
              "Gazebo Simulation",
              "ROS2 Humble",
              "Autonomous Navigation",
              "Mobile Robotics"
            ]
          }
        },
        {
          "@type": "ListItem",
          "position": 4,
          "item": {
            "@type": "Skill",
            "name": "Mechanical Design",
            "description": "3D CAD modeling and mechanical engineering",
            "educationalLevel": "Advanced",
            "keywords": [
              "OnShape",
              "CAD Modeling",
              "Assembly Design",
              "3D Printing",
              "CNC Machining",
              "Laser Cutting",
              "Mechanical Analysis",
              "Carbon Fiber",
              "Composite Materials",
              "Gear Design"
            ]
          }
        },
        {
          "@type": "ListItem",
          "position": 5,
          "item": {
            "@type": "Skill",
            "name": "Web Development",
            "description": "Full-stack web development and mobile UX design",
            "educationalLevel": "Advanced",
            "keywords": [
              "React.js",
              "Node.js",
              "Next.js",
              "SQL",
              "MongoDB",
              "Strapi",
              "HTML",
              "CSS",
              "JavaScript",
              "PHP",
              "Mobile UX Design"
            ]
          }
        },
        {
          "@type": "ListItem",
          "position": 6,
          "item": {
            "@type": "Skill",
            "name": "Training & Documentation",
            "description": "Technical training and comprehensive documentation services",
            "educationalLevel": "Expert",
            "keywords": [
              "Technical Writing",
              "Documentation",
              "Tutorial Creation",
              "Lectures",
              "Workshops",
              "Webinars",
              "Training Sessions",
              "Personalized Training",
              "Robotics Education"
            ]
          }
        }
      ]
    }
    </script>

    <!-- OFFER CATALOG SCHEMA (Searchable Services) -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "OfferCatalog",
      "name": "Robotics & Automation Engineering Services",
      "itemListElement": [
        {
          "@type": "Offer",
          "itemOffered": {
            "@type": "Service",
            "name": "Control Systems Design & Implementation",
            "description": "Custom PID, LQR, and advanced control systems for robotics and industrial automation. Includes Kalman filtering, sensor fusion, and state-space modeling.",
            "provider": {
              "@type": "Person",
              "name": "Dharm Patel"
            },
            "areaServed": {
              "@type": "State",
              "name": "Gujarat"
            }
          }
        },
        {
          "@type": "Offer",
          "itemOffered": {
            "@type": "Service",
            "name": "ROS2 Navigation & Autonomous Systems",
            "description": "Complete ROS2 development including Nav2 navigation, ros2_control, SLAM implementation, path planning, and autonomous navigation for mobile robots.",
            "provider": {
              "@type": "Person",
              "name": "Dharm Patel"
            },
            "areaServed": {
              "@type": "State",
              "name": "Gujarat"
            }
          }
        },
        {
          "@type": "Offer",
          "itemOffered": {
            "@type": "Service",
            "name": "Embedded Systems Development",
            "description": "STM32, ESP32, and microcontroller programming with RTOS, communication protocols (UART, SPI, I2C, CAN), and custom firmware development.",
            "provider": {
              "@type": "Person",
              "name": "Dharm Patel"
            },
            "areaServed": {
              "@type": "State",
              "name": "Gujarat"
            }
          }
        },
        {
          "@type": "Offer",
          "itemOffered": {
            "@type": "Service",
            "name": "Custom Circuit & PCB Design",
            "description": "Professional circuit design, PCB layout with KiCad/EasyEDA, power supply design, and hardware prototyping for robotics applications.",
            "provider": {
              "@type": "Person",
              "name": "Dharm Patel"
            },
            "areaServed": {
              "@type": "State",
              "name": "Gujarat"
            }
          }
        },
        {
          "@type": "Offer",
          "itemOffered": {
            "@type": "Service",
            "name": "Industrial Automation Solutions",
            "description": "Complete automation systems integrating control theory, embedded hardware, and robotics for manufacturing and industrial processes.",
            "provider": {
              "@type": "Person",
              "name": "Dharm Patel"
            },
            "areaServed": {
              "@type": "State",
              "name": "Gujarat"
            }
          }
        },
        {
          "@type": "Offer",
          "itemOffered": {
            "@type": "Service",
            "name": "Robotics Training & Workshops",
            "description": "Comprehensive training in ROS2, control systems, embedded programming, and robotics. Proven track record training hundreds of students.",
            "provider": {
              "@type": "Person",
              "name": "Dharm Patel"
            },
            "areaServed": {
              "@type": "Country",
              "name": "India"
            }
          }
        }
      ]
    }
    </script>

    <!-- PRELOAD CRITICAL RESOURCES -->
    <link rel="preload" as="image" href="photos/g5.webp" fetchpriority="high">
    <link rel="preload" as="style" href="./output.css">

    <!-- FAVICON -->
    <link rel="icon" type="image/png" sizes="32x32" href="photos/robotic-hand.png">
    <link rel="apple-touch-icon" sizes="180x180" href="photos/robotic-hand.png">

    <!-- LANGUAGE -->
    <meta http-equiv="content-language" content="en-IN">
    <link rel="alternate" hreflang="en-in" href="https://dharmpatel.in/">
    <link rel="alternate" hreflang="en" href="https://dharmpatel.in/">
    <link rel="alternate" hreflang="x-default" href="https://dharmpatel.in/">
    <style>
        html {
            scroll-behavior: smooth;
        }

        .card {
            transition: transform 500ms cubic-bezier(0.4, 0, 0.2, 1),
                opacity 500ms cubic-bezier(0.4, 0, 0.2, 1),
                z-index 500ms cubic-bezier(0.4, 0, 0.2, 1),
                box-shadow 500ms cubic-bezier(0.4, 0, 0.2, 1);
        }
    </style>
</head>

<body>
    <div id="app-header"></div>

    <main class="min-h-screen">
        <section>
            <div class="max-w-6xl mx-auto px-4 py-12 flex flex-col md:flex-row gap-8 items-center">
                <div class="md:w-1/2">
                    <h1 class="text-4xl font-bold mb-4">Dharm Patel</h1>
                    <p class="mb-4 text-gray-700">I design and optimize robotics and automation systems for real-world
                        applications by combining control theory and robust engineering, with a practical
                        understanding of mechanical design. I develop autonomous navigation systems, sensor integration
                        pipelines, advanced control architectures, and reliable communication frameworks for real-world
                        robotic applications.</p>

                    <p class="mb-4 text-gray-700">
                        I focus on building robust hardwareâ€“software integrated systems that perform reliably in complex
                        environments.</p>
                    <a href="/about" aria-label="Learn more about Dharm Patel Robotics Engineer"
                        class="bg-black text-white py-2 px-6 hover:bg-gray-800 transition rounded">About Dharm Patel</a>
                </div>
                <div class="md:w-1/2">
                    <img class="rounded" src="photos/g5.webp" width="1200" height="800"
                        alt="Dharm Patel Robotics Engineer" fetchpriority="high">
                </div>
            </div>
        </section>

        <!-- 3D card carousel: Services with drag/swipe and arrow navigation -->
        <section>
            <div class="max-w-6xl mx-auto py-5">
                <h2 class="text-3xl font-bold text-center">Solutions</h2>
                <div id="cardContainer"
                    class="flex justify-center items-center relative cursor-grab active:cursor-grabbing select-none overflow-hidden"
                    style="perspective: 1200px; min-height: 350px;">
                    <div id="cardStack" class="relative w-full" style="perspective: 1000px;">
                        <a href="/solutions/control-system"
                            class="card absolute top-1/2 left-1/2 -translate-y-1/2 -translate-x-1/2 bg-white rounded border border-gray-200 cursor-pointer transition-all duration-500 flex flex-col gap-2 p-4"
                            style="width: clamp(260px, 90vw, 320px); transform: translateX(-50%) translateY(-50%) translateX(0px) scale(1); z-index: 30;">
                            <img class="rounded w-full object-cover" width="600" height="400" loading="lazy"
                                alt="Control System" style="height: clamp(100px, 25vw, 160px);" src="photos/c5.webp">
                            <h3 class="text-lg font-bold">Control System</h3>
                            <p class="text-gray-600 text-sm">Advanced automation and control system solutions.</p>
                        </a>
                        <a href="/solutions/embedded-circuit-design"
                            class="card absolute top-1/2 left-1/2 -translate-y-1/2 -translate-x-1/2 bg-white rounded border border-gray-200 cursor-pointer transition-all duration-500 flex flex-col gap-2 p-4"
                            style="width: clamp(260px, 90vw, 320px); transform: translateX(-50%) translateY(-50%) translateX(350px) scale(0.85); z-index: 20;">
                            <img class="rounded w-full object-cover" width="600" height="400" loading="lazy"
                                alt="Embedded & Circuit Design" style="height: clamp(100px, 25vw, 160px);"
                                src="photos/c4.webp">
                            <h3 class="text-lg font-bold">Embedded & Circuit</h3>
                            <p class="text-gray-600 text-sm">Custom embedded systems and circuit design.</p>
                        </a>
                        <a href="/solutions/training-documentation"
                            class="card absolute top-1/2 left-1/2 -translate-y-1/2 -translate-x-1/2 bg-white rounded border border-gray-200 cursor-pointer transition-all duration-500 flex flex-col gap-2 p-4"
                            style="width: clamp(260px, 90vw, 320px); transform: translateX(-50%) translateY(-50%) translateX(-350px) scale(0.85); z-index: 10;">
                            <img class="rounded w-full object-cover" width="600" height="400" loading="lazy"
                                alt="Training & Documentation" style="height: clamp(100px, 25vw, 160px);"
                                src="photos/c2.webp">
                            <h3 class="text-lg font-bold">Training & Documentation</h3>
                            <p class="text-gray-600 text-sm">Comprehensive training and documentation.</p>
                        </a>
                        <a href="/solutions/3d-design"
                            class="card absolute top-1/2 left-1/2 -translate-y-1/2 -translate-x-1/2 bg-white rounded border border-gray-200 cursor-pointer transition-all duration-500 flex flex-col gap-2 p-4"
                            style="width: clamp(260px, 90vw, 320px); transform: translateX(-50%) translateY(-50%) translateX(450px) scale(0.8); z-index: 8;">
                            <img class="rounded w-full object-cover" width="600" height="400" loading="lazy"
                                alt="3D Design" style="height: clamp(100px, 25vw, 160px);" src="photos/c6.webp">
                            <h3 class="text-lg font-bold">3D Design</h3>
                            <p class="text-gray-600 text-sm">Professional 3D modeling and visualization.</p>
                        </a>
                        <a href="/solutions/webdevelopment"
                            class="card absolute top-1/2 left-1/2 -translate-y-1/2 -translate-x-1/2 bg-white rounded border border-gray-200 cursor-pointer transition-all duration-500 flex flex-col gap-2 p-4"
                            style="width: clamp(260px, 90vw, 320px); transform: translateX(-50%) translateY(-50%) translateX(-450px) scale(0.8); z-index: 6;">
                            <img class="rounded w-full object-cover" width="600" height="400" loading="lazy"
                                alt="Web Development" style="height: clamp(100px, 25vw, 160px);" src="photos/c3.webp">
                            <h3 class="text-lg font-bold">Web Development</h3>
                            <p class="text-gray-600 text-sm">Modern, responsive web applications.</p>
                        </a>
                    </div>

                    <button id="prevBtn" aria-label="Previous solution"
                        class="hidden md:flex absolute left-3 top-1/2 -translate-y-1/2 bg-white/80 backdrop-blur-sm text-black rounded-full items-center justify-center border border-gray-200 hover:scale-105 transition"
                        style="width: 40px; height: 40px; font-size: 18px;">&#10094;</button>
                    <button id="nextBtn" aria-label="Next solution"
                        class="hidden md:flex absolute right-3 top-1/2 -translate-y-1/2 bg-white/80 backdrop-blur-sm text-black rounded-full items-center justify-center border border-gray-200 hover:scale-105 transition"
                        style="width: 40px; height: 40px; font-size: 18px;">&#10095;</button>
                </div>


            </div>
        </section>
    </main>

    <div id="app-footer"></div>

    <script>
        // 3D carousel with drag/swipe support
        let currentCard = 0;
        let startX = 0;
        let isDragging = false;
        const cards = document.querySelectorAll('.card');
        const container = document.getElementById('cardContainer');
        const totalCards = cards.length;

        function applyShadows(card, isFront) {
            if (isFront) {
                card.style.boxShadow = '0 12px 18px -6px rgba(0,0,0,0.18), 0 -12px 18px -6px rgba(0,0,0,0.12)';
            } else {
                card.style.boxShadow = '0 8px 14px -8px rgba(0,0,0,0.08), 0 -8px 14px -8px rgba(0,0,0,0.06)';
            }
        }

        // Update card positions and transforms based on carousel index
        function updateStack() {
            const isMobile = window.innerWidth < 768;
            const rightBase = isMobile ? 60 : 140;
            const scaleStep = 0.25;
            const zBase = 40;

            cards.forEach((card, idx) => {
                const rel = (idx - currentCard + totalCards) % totalCards;
                let x = 0, scale = 1, opacity = 1, z = zBase, rotate = 0;

                if (rel === 0) {
                    x = 0; scale = 1; opacity = 1; z = zBase; rotate = 0;
                    card.style.pointerEvents = 'auto';
                } else if (rel === 1) {
                    x = rightBase; scale = 1 - scaleStep; opacity = 0.96; z = zBase - 8; rotate = -6;
                    card.style.pointerEvents = 'auto';
                } else if (rel === totalCards - 1) {
                    x = -rightBase; scale = 1 - scaleStep; opacity = 0.96; z = zBase - 12; rotate = 6;
                    card.style.pointerEvents = 'auto';
                } else {
                    const subtleX = isMobile ? rightBase * 1.2 : rightBase * 1.5;
                    if (rel > 1 && rel <= Math.floor(totalCards / 2)) {
                        x = subtleX;
                    } else {
                        x = -subtleX;
                    }
                    scale = 0.6;
                    opacity = 0.5;
                    z = 1;
                    rotate = rel > totalCards / 2 ? 8 : -8;
                    card.style.pointerEvents = 'none';
                }

                card.style.transform = `translateX(-50%) translateY(-50%) translateX(${x}px) scale(${scale}) rotateY(${rotate}deg)`;
                card.style.zIndex = Math.floor(z);
                card.style.opacity = opacity;
                applyShadows(card, rel === 0);
            });
        }

        container.addEventListener('mousedown', (e) => {
            isDragging = true;
            startX = e.clientX;
            container.style.cursor = 'grabbing';
        });

        container.addEventListener('touchstart', (e) => {
            isDragging = true;
            startX = e.touches[0].clientX;
        }, { passive: true });

        function handlePointerMove(currentX) {
            if (!isDragging) return;
            const diff = startX - currentX;
            if (Math.abs(diff) > 30) {
                isDragging = false;
                if (diff > 0) {
                    currentCard = (currentCard + 1) % totalCards;
                } else {
                    currentCard = (currentCard - 1 + totalCards) % totalCards;
                }
                updateStack();
            }
        }

        // Drag/swipe handlers
        document.addEventListener('mousemove', (e) => handlePointerMove(e.clientX));
        document.addEventListener('touchmove', (e) => handlePointerMove(e.touches[0].clientX), { passive: true });

        document.addEventListener('mouseup', () => {
            isDragging = false;
            container.style.cursor = 'grab';
        });

        document.addEventListener('touchend', () => {
            isDragging = false;
        });

        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');

        prevBtn && prevBtn.addEventListener('click', () => {
            currentCard = (currentCard - 1 + totalCards) % totalCards;
            updateStack();
        });

        nextBtn && nextBtn.addEventListener('click', () => {
            currentCard = (currentCard + 1) % totalCards;
            updateStack();
        });

        window.addEventListener('resize', () => {
            updateStack();
        });

        updateStack();
    </script>
</body>

</html>